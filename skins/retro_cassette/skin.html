<!DOCTYPE html>
<html>
<head>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Courier+Prime:wght@700&display=swap');

        body { margin: 0; padding: 20px; background: transparent; font-family: 'Courier Prime', monospace; }

        .cassette {
            width: 420px; height: 100px;
            background: #f4e4bc; /* Beige papier */
            border: 4px solid #333; border-radius: 8px;
            position: relative; display: flex; align-items: center; padding: 0 15px;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.8);
            color: #222;
        }

        /* Bande d√©corative */
        .stripe { position: absolute; top: 15px; left: 0; right: 0; height: 15px; background: #d9463e; z-index: 0; opacity: 0.8; }

        .thumb { width: 70px; height: 70px; border: 2px solid #222; z-index: 2; background: #333; transform: rotate(-2deg); }
        .thumb img { width: 100%; height: 100%; object-fit: cover; filter: sepia(0.4) contrast(1.2); }

        .details { margin-left: 20px; z-index: 2; flex: 1; display: flex; flex-direction: column; justify-content: center; }
        .label-song { font-family: 'Permanent Marker', cursive; font-size: 22px; line-height: 1; margin-bottom: 5px; color: #222; transform: rotate(-1deg); }
        .label-artist { font-size: 14px; text-transform: uppercase; letter-spacing: 1px; font-weight: bold; border-bottom: 2px dashed #999; display: inline-block; width: 100%; }

        .tape-progress {
            position: absolute; bottom: 8px; right: 15px; width: 100px; height: 12px;
            background: #333; border-radius: 6px; border: 2px solid #555; overflow: hidden;
        }
        .tape-fill { height: 100%; background: #fff; width: 50%; }

    </style>
</head>
<body>
    <div class="cassette">
        <div class="stripe"></div>
        <div class="thumb"><img id="pic" src=""></div>
        <div class="details">
            <div id="tune" class="label-song">Insert Tape</div>
            <div id="sing" class="label-artist">Unknown</div>
        </div>
        <div class="tape-progress"><div id="bar" class="tape-fill"></div></div>
    </div>
    <script>
        setInterval(() => {
            fetch('/api/current-track').then(r=>r.json()).then(d => {
                document.getElementById('tune').innerText = d.title;
                document.getElementById('sing').innerText = d.artist;
                document.getElementById('pic').src = d.thumbnail;
                document.getElementById('bar').style.width = (d.position/d.duration*100) + '%';
            }).catch(()=>{});
        }, 1000);
    </script>
</body>
</html>
